<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width,initial-scale=0.5,maximum-scale=1,minimum-scale=1,user-scalable=no">
<title id="title">请稍候...</title>
<style>
html,body{
margin:0px;
width: 100%;
height: 100%;
font-family:微软雅黑;
font-size:13px;
}
#alertbg{
position:absolute;
width:100%;
height:100%;
z-index:6;
background-color:rgba(0,0,0,0.5);
}
#endui{
position:absolute;
top:-20px;
z-index:7;
background:#fff;
width:100%;
height:320px;
border-radius:20px;
box-shadow:0px 0px 10px #555;
text-align:center;
}
#startui{
position:absolute;
bottom:0px;
z-index:7;
background:#fff;
width:100%;
height:300px;
border-radius:20px 20px 0px 0px;
box-shadow:0px 0px 10px #555;
text-align:center;
}
.option{
position:absolute;
bottom:0px;
z-index:7;
background:#fff;
width:100%;
height:300px;
border-radius:20px 20px 0px 0px;
text-align:center;
display:none;
}
.mode_button{
display:inline-block;
padding:7px;
margin:7px;
width:70px;
border:2px solid rgb(0,200,195);
background:#fff;
color:rgb(0,200,195);
border-radius:5px;
text-decoration:none;
}
#main{
overflow:hidden;
position:relative;
width:100%;
height:100%;
}
</style>
<style id="end_animation"></style>
<style id="switch_animation"></style>
<style id="alert_style">#endui{display:none}#startui{display:none}</style>
<style id="alertbg_style">#alertbg{display:none}</style>
</head>
<body>
<p id="score" style="position:absolute;width:100%;text-align:center;font-size:30px;z-index:5;color:rgb(0,200,195);text-shadow:1px 1px 2px #fff,-1px -1px 2px #fff">请稍候...</p>
<div id="alertbg"></div>
<div id="audio" style="display:none"></div>
<div id="audio2" style="display:none"></div>
<!--主体-->
<div id="main" class="main">
<div id="masker" style="position:absolute;width:100%;height:100%;z-index:4"></div>
<table id="line1" style="width:100%;height:350px;position:absolute;z-index:2">
<tr>
<td id="part1_1_1" class="part1"></td>
<td id="part1_1_2" class="part1"></td>
<td id="part1_1_3" class="part1"></td>
<td id="part1_1_4" class="part1"></td>
<td id="part1_1_5" class="part1"></td>
</tr>
<tr>
<td id="part1_2_1" class="part1"></td>
<td id="part1_2_2" class="part1"></td>
<td id="part1_2_3" class="part1"></td>
<td id="part1_2_4" class="part1"></td>
<td id="part1_2_5" class="part1"></td>
</tr>
<tr>
<td id="part1_3_1" class="part1"></td>
<td id="part1_3_2" class="part1"></td>
<td id="part1_3_3" class="part1"></td>
<td id="part1_3_4" class="part1"></td>
<td id="part1_3_5" class="part1"></td>
</tr>
<tr>
<td id="part1_4_1" class="part1"></td>
<td id="part1_4_2" class="part1"></td>
<td id="part1_4_3" class="part1"></td>
<td id="part1_4_4" class="part1"></td>
<td id="part1_4_5" class="part1"></td>
</tr>
<tr>
<td id="part1_5_1" class="part1"></td>
<td id="part1_5_2" class="part1"></td>
<td id="part1_5_3" class="part1"></td>
<td id="part1_5_4" class="part1"></td>
<td id="part1_5_5" class="part1"></td>
</tr>
</table>
<table id="line2" style="width:100%;height:350px;position:absolute;z-index:2">
<tr>
<td id="part2_1_1" class="part2"></td>
<td id="part2_1_2" class="part2"></td>
<td id="part2_1_3" class="part2"></td>
<td id="part2_1_4" class="part2"></td>
<td id="part2_1_5" class="part2"></td>
</tr>
<tr>
<td id="part2_2_1" class="part2"></td>
<td id="part2_2_2" class="part2"></td>
<td id="part2_2_3" class="part2"></td>
<td id="part2_2_4" class="part2"></td>
<td id="part2_2_5" class="part2"></td>
</tr>
<tr>
<td id="part2_3_1" class="part2"></td>
<td id="part2_3_2" class="part2"></td>
<td id="part2_3_3" class="part2"></td>
<td id="part2_3_4" class="part2"></td>
<td id="part2_3_5" class="part2"></td>
</tr>
<tr>
<td id="part2_4_1" class="part2"></td>
<td id="part2_4_2" class="part2"></td>
<td id="part2_4_3" class="part2"></td>
<td id="part2_4_4" class="part2"></td>
<td id="part2_4_5" class="part2"></td>
</tr>
<tr>
<td id="part2_5_1" class="part2"></td>
<td id="part2_5_2" class="part2"></td>
<td id="part2_5_3" class="part2"></td>
<td id="part2_5_4" class="part2"></td>
<td id="part2_5_5" class="part2"></td>
</tr>
</table>
</div>
<!--起始页-->
<div id="startui">
<div style="height:10px;width:100%"></div>
<p style="margin:5px">游戏模式</p>
<div>
<div id="select_random" class="mode_button" onclick="select_random()">随机</div><div id="select_stair" class="mode_button" onclick="select_stair()">楼梯</div><div id="select_continuous" class="mode_button" onclick="select_continuous()">全纵连</div>
</div>
<div id="stair_option" style="display:none">
<div id="stair_l2r" class="mode_button" style="width:121px" onclick="stair_l2r();reset()">左→右</div><div id="stair_r2l" class="mode_button" style="width:121px" onclick="stair_r2l();reset()">右←左</div>
</div>
<div id="continuous_option" style="display:none">
<div style='display:inline-block'>第</div><input id='user_continuous_input' type='text' class='mode_button' style='width:70px;text-align:center' oninput="this.value = this.value.replace(/[^0-9]/g, '');list_name = this.value;reset()"/><div style='display:inline-block'>列</div>
</div>
<p style="margin:5px">选项</p>
<div>
<div id="chance_option_button" class="mode_button" onclick="document.getElementById('chance_option').style.display = 'inline'">机会</div><div id="theme_option_button" class="mode_button" onclick="document.getElementById('theme_option').style.display = 'inline'">个性化</div><div id="timeout_option_button" class="mode_button" onclick="document.getElementById('timeout_option').style.display = 'inline'">倒计时</div>
</div>
<div class="mode_button" style="background:rgb(0,200,195);color:#fff;width:274px" onclick="start()">开始</div>
<p style="margin:5px;font-size:10px">判定位置：页面最底部</p>
<p style="margin:5px;font-size:10px">本项目基于重制的 <a href="https://github.com/BUGTeas/EatKanoRemade" style="color:rgb(0,200,195)">BUGTeas/EatKanoRemade</a>，与 <a href="https://github.com/arcxingye/EatKano" style="color:rgb(0,200,195)">arcxingye/EatKano</a> 无关！</p>
</div>
<!--倒计时选项-->
<div id="timeout_option" class="option">
<p>倒计时</p>
<div>
<div id="disable_timeout" class="mode_button" style="width:121px" onclick="disable_timeout()">禁用</div><div id="enable_timeout" class="mode_button" style="width:121px" onclick="enable_timeout()">启用</div>
</div>
<div id="user_timeout_option" style="display:none">
<input id='user_timeout_input' type='text' class='mode_button' style='width:128px' onclick="inputtimeout = this.value;get_this = this" oninput="this.value = this.value.replace(/[^0-9]/g, '');user_timeout = this.value;reset()"/><div style='display:inline-block'>秒</div>
</div>
<div>
<div class="mode_button" style='background:rgb(0,200,195);color:#fff;width:274px' onclick="document.getElementById('timeout_option').style.display = 'none'">确认</div>
</div>
</div>
<!--机会选项-->
<div id="chance_option" class="option">
<p>机会</p>
<div>
<div id="disable_chance" class="mode_button" onclick="disable_chance()">禁用</div><div id="enable_chance" class="mode_button" onclick="enable_chance()">启用</div><div id="enable_chance_infinite" class="mode_button" onclick="enable_chance_infinite()">无限</div>
</div>
<div id="user_chance_option" style="display:none">
<input id='user_chance_input' type='text' class='mode_button' style='width:128px' onclick="inputchance = this.value;get_this = this" oninput="this.value = this.value.replace(/[^0-9]/g, '');user_chance = this.value;reset()"/><div style='display:inline-block'>次</div>
</div>
<div>
<div class="mode_button" style='background:rgb(0,200,195);color:#fff;width:274px' onclick="document.getElementById('chance_option').style.display = 'none'">确认</div>
</div>
</div>
<!--个性化选项-->
<div id="theme_option" class="option">
<p>个性化</p>
<div>
<div style='display:inline-block'>页面标题</div><input id='user_title_input' type='text' class='mode_button' style='width:200px' oninput="document.getElementById('title').innerHTML = this.value;"/>
</div>
<div>
<div class="mode_button" onclick="document.getElementById('background_option').style.display = 'inline'" style='background:rgb(0,200,195);color:#fff'>背景</div><div class="mode_button" onclick="document.getElementById('click_style_option').style.display = 'inline'" style='background:rgb(0,200,195);color:#fff'>按键</div><div id="sound_option_button" class="mode_button" onclick="document.getElementById('sound_option').style.display = 'inline'">声音</div>
</div>
<p>焯</p>
<div>
<div id="open_焯" class="mode_button" style="width:121px" onclick="open_焯()">开启</div><div id="close_焯" class="mode_button" style="width:121px" onclick="close_焯()">关闭</div>
</div>
<div>
<div class="mode_button" style='background:rgb(0,200,195);color:#fff;width:274px' onclick="document.getElementById('theme_option').style.display = 'none'">确认</div>
</div>
</div>
<!--个性化-背景选项-->
<div id="background_option" class="option">
<p>背景</p>
<div>
<div id="to_part1_background_option" class="mode_button" style="width:121px" onclick="to_part1_theme_option()">区域一</div><div id="to_part2_background_option" class="mode_button" style="width:121px" onclick="to_part2_theme_option()">区域二</div>
</div>
<p style="margin:0px;font-size:10px">输入颜色的对应代码，如“#114514”、“rgb(0,200,20)”、“red”</p>
<div>
<div style='display:inline-block'>背景颜色</div><input id='background_input' type='text' class='mode_button' style='width:200px' oninput="if(theme_part_name=='part1'){part1_background = this.value;reset();}if(theme_part_name=='part2'){part2_background = this.value;reset();}"/>
</div>
<div>
<div style='display:inline-block'>边框颜色</div><input id='border_input' type='text' class='mode_button' style='width:200px' oninput="if(theme_part_name=='part1'){part1_border = this.value;reset();}if(theme_part_name=='part2'){part2_border = this.value;reset();}"/>
</div>
<div>
<div class="mode_button" style='background:rgb(0,200,195);color:#fff;width:274px' onclick="document.getElementById('background_option').style.display = 'none'">确认</div>
</div>
</div>
<!--个性化-按键样式选项-->
<div id="click_style_option" class="option" style="height:400px;bottom:-100px">
<p>按键样式</p>
<div>
<div id="to_part1_click_style_option" class="mode_button" style="width:121px" onclick="to_part1_theme_option()">区域一</div><div id="to_part2_click_style_option" class="mode_button" style="width:121px" onclick="to_part2_theme_option()">区域二</div>
</div>
<p style="margin:0px;font-size:10px">输入颜色的对应代码，如“#114514”、“rgb(0,200,20)”、“red”</p>
<div>
<div style='display:inline-block'>背景颜色</div><input id='click_background_input' type='text' class='mode_button' style='width:200px' oninput="if(theme_part_name=='part1'){part1_click_background = this.value;part1_reset()}if(theme_part_name=='part2'){part2_click_background = this.value;part2_reset()}"/>
</div>
<p style="margin:5px">按键内容(点击前)</p>
<div>
<div class="mode_button" id="click_inner_before_default" onclick="click_inner_before_default()">默认图片</div><div class="mode_button" id="click_inner_before_image" onclick="click_inner_before_image()">自定义图片</div><div class="mode_button" id="click_inner_before_html" onclick="click_inner_before_html()">HTML 代码</div>
</div>
<div id="click_inner_before_default_option" style="display:none">
<div id="click_inner_before_default_1" class="mode_button" style="width:121px" onclick="click_inner_before_default_1()">图片一</div><div id="click_inner_before_default_2" class="mode_button" style="width:121px" onclick="click_inner_before_default_2()">图片二</div>
</div>
<div id="click_inner_before_image_option"></div>
<div id="click_inner_before_html_option" style="display:none">
<div style='display:inline-block'>HTML 代码</div><input id='click_inner_before_html_input' type='text' class='mode_button' style='width:200px' oninput="if(theme_part_name=='part1'){part1_click_inner = this.value;part1_reset()}if(theme_part_name=='part2'){part2_click_inner = this.value;part2_reset()}"/>
</div>
<p style="margin:5px">按键内容(点击后)</p>
<div>
<div class="mode_button" id="click_inner_after_default" onclick="click_inner_after_default()">默认图片</div><div class="mode_button" id="click_inner_after_image" onclick="click_inner_after_image()">自定义图片</div><div class="mode_button" id="click_inner_after_html" onclick="click_inner_after_html()">HTML 代码</div>
</div>
<div id="click_inner_after_image_option"></div>
<div id="click_inner_after_html_option" style="display:none">
<div style='display:inline-block'>HTML 代码</div><input id='click_inner_after_html_input' type='text' class='mode_button' style='width:200px' oninput="if(theme_part_name=='part1'){part1_after_click_inner = this.value;part1_reset()}if(theme_part_name=='part2'){part2_after_click_inner = this.value;part2_reset()}"/>
</div>
<div>
<div class="mode_button" style='background:rgb(0,200,195);color:#fff;width:274px' onclick="document.getElementById('click_style_option').style.display = 'none'">确认</div>
</div>
</div>
<!--个性化-声音选项-->
<div id="sound_option" class="option" style="height:310px;bottom:-10px">
<p>声音</p>
<div>
<div id="disable_sound" class="mode_button" style="width:121px" onclick="disable_sound()">禁用</div><div id="enable_sound" class="mode_button" style="width:121px" onclick="enable_sound()">启用</div>
</div>
<div id="sound_option_main" style="display:none">
<p style="margin:5px">时间结束音效</p>
<div>
<div id="timeover_sound_disable" class="mode_button" onclick="timeover_sound_disable()">无</div><div id="timeover_sound_default" class="mode_button" onclick="timeover_sound_default();play_timeover_sound()">默认</div><div id="timeover_sound_custom" class="mode_button" onclick="timeover_sound_custom()">自定义文件</div>
</div>
<div id="timeover_sound_custom_option"></div>
<p style="margin:5px">点击错误音效</p>
<div>
<div id="error_sound_disable" class="mode_button" onclick="error_sound_disable()">无</div><div id="error_sound_default" class="mode_button" onclick="error_sound_default();play_error_sound()">默认</div><div id="error_sound_custom" class="mode_button" onclick="error_sound_custom()">自定义文件</div>
</div>
<div id="error_sound_custom_option"></div>
<p style="margin:5px">点击错误音效(有机会)</p>
<div>
<div id="error_chance_sound_disable" class="mode_button" onclick="error_chance_sound_disable()">无</div><div id="error_chance_sound_default" class="mode_button" onclick="error_chance_sound_default();play_error_chance_sound()">默认</div><div id="error_chance_sound_custom" class="mode_button" onclick="error_chance_sound_custom()">自定义文件</div>
</div>
<div id="error_chance_sound_custom_option"></div>
<p style="margin:5px">按键点击音效</p>
<div>
<div id="to_part1_sound_option" class="mode_button" style="width:121px" onclick="to_part1_theme_option()">区域一</div><div id="to_part2_sound_option" class="mode_button" style="width:121px" onclick="to_part2_theme_option()">区域二</div>
</div>
<div>
<div id="click_sound_disable" class="mode_button" onclick="click_sound_disable()">无</div><div id="click_sound_default" class="mode_button" onclick="click_sound_default()">默认</div><div id="click_sound_custom" class="mode_button" onclick="click_sound_custom()">自定义文件</div>
</div>
<div id="click_sound_default_option" style="display:none">
<div id="click_sound_default_1" class="mode_button" style="width:121px" onclick="click_sound_default_1();var audio = document.createElement('audio');audio.src = 'click_sound_default_1.mp3';audio.play();">声音一</div><div id="click_sound_default_2" class="mode_button" style="width:121px" onclick="click_sound_default_2();var audio = document.createElement('audio');audio.src = 'click_sound_default_2.mp3';audio.play();">声音二</div>
</div>
<div id="click_sound_custom_option"></div>
</div>
<div class="mode_button" style='background:rgb(0,200,195);color:#fff;width:274px' onclick="document.getElementById('sound_option').style.display = 'none'">确认</div>
</div>
<!--游戏结束页-->
<div id="endui">
<div style="height:20px;width:100%"></div>
<h3 id="endui_said"></h3>
<p id="endui_timeout"></p>
<div>
<div class="mode_button" style="width:121px" onclick="restart()">重新开始</div><div class="mode_button" style="background:rgb(0,200,195);color:#fff;width:121px" onclick="tostartui()">返回起始页</div>
</div>
<!--在此处修改你的开源地址、视频链接，记得要保留原作者的链接-->
<div>
<a class="mode_button" href="http://github.com/BUGTeas/ChaoKano">开源</a><a class="mode_button" style="background:rgb(0,200,195);color:#fff" href="https://www.bilibili.com/video/BV13L4y1G7wa">视频(Bilibili)</a><a class="mode_button" href="http://github.com/BUGTeas/EatKanoRemade">原作者</a><div class="mode_button" onclick="alert('本项目基于重制的 BUGTeas/EatKanoRemade，与 arcxingye/EatKano 无关！');window.location.href = 'https://github.com/arcxingye/EatKano'">灵感来源</div>
</div>
</div>
<script type="text/javascript">
//所有变量都不能删除
//默认标题
var user_title = "焯掉小鹿乃";
//默认边框颜色
var part1_border = "#eee";
var part2_border = "#eee";
//默认背景颜色
var part1_background = "#fff";
var part2_background = "#fff";
//默认按键背景颜色
var part1_click_background = "#fff";
var part2_click_background = "#fff";
//设置点击前按键内容(default/html)
var part1_before_click_inner_mode = "default";
var part2_before_click_inner_mode = "default";
//点击前默认图片选择(1/2)
var part1_click_inner_before_default ="1";
var part2_click_inner_before_default ="1";
//点击前默认HTML代码(不能有双引号)
var part1_click_inner = "<p>Hello</p><p>World</p>";
var part2_click_inner = "<p>Hello</p><p>World</p>"
//设置点击后按键内容(default/html)
var part1_after_click_inner_mode = "default";
var part2_after_click_inner_mode = "default";
//点击后默认HTML代码(不能有双引号)
var part1_after_click_inner = "<p>Click</p><p>World</p>";
var part2_after_click_inner = "<p>Click</p><p>World</p>";
//声音(disabled/enabled)
var sound_mode = "enabled";
//倒计时结束声音(disabled/default)
var timeover_sound_mode = "default";
//点击错误声音(disabled/default)
var error_sound_mode = "default";
//有机会点击错误声音(disabled/default)
var error_chance_sound_mode = "default";
//点击后声音(disabled/default)
var part1_click_sound_mode = "default";
var part2_click_sound_mode = "default";
//点击后默认声音选择(1/2)
var part1_click_sound_default = "1";
var part2_click_sound_default = "1";
//默认游戏模式(random/stair/continuous)
var set_mode = "random";
//楼梯模式默认方向(r2l/l2r)
var stair_mode = "l2r";
//全纵连模式默认位置(单位:列)
var continuous_list = 3;
//倒计时(disabled/enabled)
var timeout_mode = "enabled";
//倒计时时长(单位:秒)
var user_timeout = "20";
//机会(disabled/enabled)
var chance_mode = "disabled";
//机会次数(单位:次)
var user_chance = "5";
//焯(disabled/enabled)
var 焯 = "enabled";
//以下是程序部分，由于是原生JS，代码显得非常混乱，看不懂就别往下翻了
//程序变量 Program value
var animation_cnt = 0;
var cnt;
var timeout;
var chance;
var timeout_plus;
var chance_plus;
var part1_fullheight;
var part2_fullheight;
var setrandom;
var get_this;
var part_name;
var line_name;
var list_name;
var inputtimeout;
var theme_part_name;
var input_image;
var image_mode;
var timeover_sound;
var error_sound;
var error_chance_sound;
var part1_click_sound;
var part2_click_sound;
var endui_say;
//窗口标题设置
document.getElementById("user_title_input").value = user_title;
//进入起始页
alertbg_in();
loadstartui();
//主页选项界面部分
function loadstartui(){
document.getElementById("alert_style").innerHTML = "#startui{animation-name:startui_in;animation-duration:0.3s;}@keyframes startui_in{0%{bottom:-320px}100%{bottom:0px}}#endui{display:none}";
}
//选择游戏模式
if(set_mode=="random"){select_random()}
if(set_mode=="stair"){select_stair()}
if(set_mode=="continuous"){select_continuous()}
//随机模式
function select_random(){
set_mode = 'random';
document.getElementById("select_random").style.background = 'rgb(0,200,195)';
document.getElementById("select_random").style.color = '#fff';
document.getElementById("select_stair").style.color = 'rgb(0,200,195)';
document.getElementById("select_stair").style.background = '#fff';
document.getElementById("select_continuous").style.color = 'rgb(0,200,195)';
document.getElementById("select_continuous").style.background = '#fff';
document.getElementById("stair_option").style.display = "none";
document.getElementById("continuous_option").style.display = "none";
reset();
}
//楼梯模式
function select_stair(){
set_mode = 'stair';
document.getElementById("select_stair").style.background = 'rgb(0,200,195)';
document.getElementById("select_stair").style.color = '#fff';
document.getElementById("select_random").style.color = 'rgb(0,200,195)';
document.getElementById("select_random").style.background = '#fff';
document.getElementById("select_continuous").style.color = 'rgb(0,200,195)';
document.getElementById("select_continuous").style.background = '#fff';
document.getElementById("stair_option").style.display = "inline";
document.getElementById("continuous_option").style.display = "none";
reset();
}
//楼梯设置(左→右/右←左)
if(stair_mode=="l2r"){stair_l2r()}
if(stair_mode=="r2l"){stair_r2l()}
function stair_l2r(){
document.getElementById("stair_l2r").style.background = 'rgb(0,200,195)';
document.getElementById("stair_l2r").style.color = '#fff';
document.getElementById("stair_r2l").style.color = 'rgb(0,200,195)';
document.getElementById("stair_r2l").style.background = '#fff';
stair_mode = "l2r";
}
function stair_r2l(){
document.getElementById("stair_r2l").style.background = 'rgb(0,200,195)';
document.getElementById("stair_r2l").style.color = '#fff';
document.getElementById("stair_l2r").style.color = 'rgb(0,200,195)';
document.getElementById("stair_l2r").style.background = '#fff';
stair_mode = "r2l";
}
//全纵连模式
//设置默认纵连位置(单位:列)
document.getElementById("user_continuous_input").value = continuous_list;
function select_continuous(){
set_mode = 'continuous';
list_name = document.getElementById("user_continuous_input").value;
document.getElementById("select_stair").style.color = 'rgb(0,200,195)';
document.getElementById("select_stair").style.background = '#fff';
document.getElementById("select_random").style.color = 'rgb(0,200,195)';
document.getElementById("select_random").style.background = '#fff';
document.getElementById("select_continuous").style.background = 'rgb(0,200,195)';
document.getElementById("select_continuous").style.color = '#fff';
document.getElementById("stair_option").style.display = "none";
document.getElementById("continuous_option").style.display = "inline";
reset();
}
//开始游戏
function start(){
document.getElementById("alert_style").innerHTML = "#startui{animation-name:startui_out;animation-duration:0.3s;}@keyframes startui_out{0%{bottom:0px}100%{bottom:-320px}}#endui{display:none}";
setTimeout("document.getElementById('alert_style').innerHTML = '#endui{display:none}#startui{display:none}'",300);
alertbg_out();
}
//设置默认倒计时(单位:秒)
document.getElementById("user_timeout_input").value = user_timeout;
//倒计时设置(启用/禁用)
if(timeout_mode=="disabled"){disable_timeout()}
if(timeout_mode=="enabled"){enable_timeout()}
function disable_timeout(){
document.getElementById("disable_timeout").style.background = 'rgb(0,200,195)';
document.getElementById("disable_timeout").style.color = '#fff';
document.getElementById("enable_timeout").style.color = 'rgb(0,200,195)';
document.getElementById("enable_timeout").style.background = '#fff';
document.getElementById("timeout_option_button").style.background = '#fff';
document.getElementById("timeout_option_button").style.color = 'rgb(0,200,195)';
document.getElementById("user_timeout_option").style.display = "none";
user_timeout = "disabled";
reset();
}
function enable_timeout(){
document.getElementById("enable_timeout").style.background = 'rgb(0,200,195)';
document.getElementById("enable_timeout").style.color = '#fff';
document.getElementById("disable_timeout").style.color = 'rgb(0,200,195)';
document.getElementById("disable_timeout").style.background = '#fff';
document.getElementById("timeout_option_button").style.background = 'rgb(0,200,195)';
document.getElementById("timeout_option_button").style.color = '#fff';
document.getElementById("user_timeout_option").style.display = "inline";
user_timeout = document.getElementById("user_timeout_input").value
reset();
}
//设置默认机会次数(单位:次)
document.getElementById("user_chance_input").value = user_chance;
//机会设置(启用/禁用/无限)
if(chance_mode=="disabled"){disable_chance()}
if(chance_mode=="enabled"){enable_chance()}
function disable_chance(){
document.getElementById("disable_chance").style.background = 'rgb(0,200,195)';
document.getElementById("disable_chance").style.color = '#fff';
document.getElementById("enable_chance").style.color = 'rgb(0,200,195)';
document.getElementById("enable_chance").style.background = '#fff';
document.getElementById("enable_chance_infinite").style.color = 'rgb(0,200,195)';
document.getElementById("enable_chance_infinite").style.background = '#fff';
document.getElementById("chance_option_button").style.background = '#fff';
document.getElementById("chance_option_button").style.color = 'rgb(0,200,195)';
document.getElementById("user_chance_option").style.display = "none";
user_chance = "disabled";
reset();
}
function enable_chance(){
document.getElementById("enable_chance").style.background = 'rgb(0,200,195)';
document.getElementById("enable_chance").style.color = '#fff';
document.getElementById("disable_chance").style.color = 'rgb(0,200,195)';
document.getElementById("disable_chance").style.background = '#fff';
document.getElementById("enable_chance_infinite").style.color = 'rgb(0,200,195)';
document.getElementById("enable_chance_infinite").style.background = '#fff';
document.getElementById("chance_option_button").style.background = 'rgb(0,200,195)';
document.getElementById("chance_option_button").style.color = '#fff';
document.getElementById("user_chance_option").style.display = "inline";
user_chance = document.getElementById("user_chance_input").value;
reset();
}
function enable_chance_infinite(){
document.getElementById("enable_chance").style.background = '#fff';
document.getElementById("enable_chance").style.color = 'rgb(0,200,195)';
document.getElementById("disable_chance").style.color = 'rgb(0,200,195)';
document.getElementById("disable_chance").style.background = '#fff';
document.getElementById("enable_chance_infinite").style.color = '#fff';
document.getElementById("enable_chance_infinite").style.background = 'rgb(0,200,195)';
document.getElementById("chance_option_button").style.background = 'rgb(0,200,195)';
document.getElementById("chance_option_button").style.color = '#fff';
document.getElementById("user_chance_option").style.display = "none";
user_chance = "infinite";
reset();
}
//窗口背景变暗动画
function alertbg_in(){
document.getElementById("alertbg_style").innerHTML = "#alertbg{animation-name:alertbg_in;animation-duration:0.3s;}@keyframes alertbg_in{0%{opacity:0}100%{opacity:1}}";
}
function alertbg_out(){
document.getElementById("alertbg_style").innerHTML = "#alertbg{animation-name:alertbg_out;animation-duration:0.3s;}@keyframes alertbg_out{0%{opacity:1}100%{opacity:0}}";
setTimeout("document.getElementById('alertbg_style').innerHTML = '#alertbg{display:none}'",300);
}
//主题设置界面(区域一/二)
to_part2_theme_option();
to_part1_theme_option();
function to_part1_theme_option(){
document.getElementById("to_part1_background_option").style.background = 'rgb(0,200,195)';
document.getElementById("to_part1_background_option").style.color = '#fff';
document.getElementById("to_part2_background_option").style.color = 'rgb(0,200,195)';
document.getElementById("to_part2_background_option").style.background = '#fff';
document.getElementById("to_part1_click_style_option").style.background = 'rgb(0,200,195)';
document.getElementById("to_part1_click_style_option").style.color = '#fff';
document.getElementById("to_part2_click_style_option").style.color = 'rgb(0,200,195)';
document.getElementById("to_part2_click_style_option").style.background = '#fff';
document.getElementById("to_part1_sound_option").style.background = 'rgb(0,200,195)';
document.getElementById("to_part1_sound_option").style.color = '#fff';
document.getElementById("to_part2_sound_option").style.color = 'rgb(0,200,195)';
document.getElementById("to_part2_sound_option").style.background = '#fff';
theme_part_name = "part1";
document.getElementById("background_input").value = part1_background;
document.getElementById("border_input").value = part1_border;
document.getElementById("click_background_input").value = part1_click_background;
if(part1_before_click_inner_mode=="default"){click_inner_before_default()};
if(part1_before_click_inner_mode=="image"){click_inner_before_image()};
if(part1_before_click_inner_mode=="html"){click_inner_before_html()};
if(part1_after_click_inner_mode=="default"){click_inner_after_default()};
if(part1_after_click_inner_mode=="image"){click_inner_after_image()};
if(part1_after_click_inner_mode=="html"){click_inner_after_html()};
if(part1_click_sound_mode=="disable"){click_sound_disable()};
if(part1_click_sound_mode=="default"){click_sound_default()};
if(part1_click_sound_mode=="custom"){click_sound_custom()};
}
function to_part2_theme_option(){
document.getElementById("to_part2_background_option").style.background = 'rgb(0,200,195)';
document.getElementById("to_part2_background_option").style.color = '#fff';
document.getElementById("to_part1_background_option").style.color = 'rgb(0,200,195)';
document.getElementById("to_part1_background_option").style.background = '#fff';
document.getElementById("to_part2_click_style_option").style.background = 'rgb(0,200,195)';
document.getElementById("to_part2_click_style_option").style.color = '#fff';
document.getElementById("to_part1_click_style_option").style.color = 'rgb(0,200,195)';
document.getElementById("to_part1_click_style_option").style.background = '#fff';
document.getElementById("to_part2_sound_option").style.background = 'rgb(0,200,195)';
document.getElementById("to_part2_sound_option").style.color = '#fff';
document.getElementById("to_part1_sound_option").style.color = 'rgb(0,200,195)';
document.getElementById("to_part1_sound_option").style.background = '#fff';
theme_part_name = "part2";
document.getElementById("background_input").value = part2_background;
document.getElementById("border_input").value = part2_border;
document.getElementById("click_background_input").value = part2_click_background;
if(part2_before_click_inner_mode=="default"){click_inner_before_default()};
if(part2_before_click_inner_mode=="image"){click_inner_before_image()};
if(part2_before_click_inner_mode=="html"){click_inner_before_html()};
if(part2_after_click_inner_mode=="default"){click_inner_after_default()};
if(part2_after_click_inner_mode=="image"){click_inner_after_image()};
if(part2_after_click_inner_mode=="html"){click_inner_after_html()};
if(part2_click_sound_mode=="disable"){click_sound_disable()};
if(part2_click_sound_mode=="default"){click_sound_default()};
if(part2_click_sound_mode=="custom"){click_sound_custom()};
}
//点击前按键内容设置(默认/自定义图片/HTML)
function click_inner_before_default(){
document.getElementById("click_inner_before_default").style.background = 'rgb(0,200,195)';
document.getElementById("click_inner_before_default").style.color = '#fff';
document.getElementById("click_inner_before_image").style.color = 'rgb(0,200,195)';
document.getElementById("click_inner_before_image").style.background = '#fff';
document.getElementById("click_inner_before_html").style.color = 'rgb(0,200,195)';
document.getElementById("click_inner_before_html").style.background = '#fff';
document.getElementById("click_inner_before_default_option").style.display = "inline";
document.getElementById("click_inner_before_image_option").innerHTML = "";
document.getElementById("click_inner_before_html_option").style.display = "none";
if(theme_part_name=="part1"){
part1_before_click_inner_mode = "default";
if(part1_click_inner_before_default=="1"){
click_inner_before_default_1();
}
if(part1_click_inner_before_default=="2"){
click_inner_before_default_2();
}
}
if(theme_part_name=="part2"){
part2_before_click_inner_mode = "default";
if(part2_click_inner_before_default=="1"){
click_inner_before_default_1();
}
if(part2_click_inner_before_default=="2"){
click_inner_before_default_2();
}
}
}
function click_inner_before_default_1(){
document.getElementById("click_inner_before_default_1").style.background = 'rgb(0,200,195)';
document.getElementById("click_inner_before_default_1").style.color = '#fff';
document.getElementById("click_inner_before_default_2").style.color = 'rgb(0,200,195)';
document.getElementById("click_inner_before_default_2").style.background = '#fff';
if(theme_part_name=="part1"){
part1_click_inner_before_default ="1";
part1_click_inner = "<img src='click_before_default_1.png' style='height:100%'/>";
part1_reset();
}
if(theme_part_name=="part2"){
part2_click_inner_before_default ="1";
part2_click_inner = "<img src='click_before_default_1.png' style='height:100%'/>";
part2_reset();
}
}
function click_inner_before_default_2(){
document.getElementById("click_inner_before_default_2").style.background = 'rgb(0,200,195)';
document.getElementById("click_inner_before_default_2").style.color = '#fff';
document.getElementById("click_inner_before_default_1").style.color = 'rgb(0,200,195)';
document.getElementById("click_inner_before_default_1").style.background = '#fff';
if(theme_part_name=="part1"){
part1_click_inner_before_default ="2";
part1_click_inner = "<img src='click_before_default_2.png' style='height:100%'/>";
part1_reset();
}
if(theme_part_name=="part2"){
part2_click_inner_before_default ="2";
part2_click_inner = "<img src='click_before_default_2.png' style='height:100%'/>";
part2_reset();
}
}
function click_inner_before_image(){
document.getElementById("click_inner_before_image").style.background = 'rgb(0,200,195)';
document.getElementById("click_inner_before_image").style.color = '#fff';
document.getElementById("click_inner_before_default").style.color = 'rgb(0,200,195)';
document.getElementById("click_inner_before_default").style.background = '#fff';
document.getElementById("click_inner_before_html").style.color = 'rgb(0,200,195)';
document.getElementById("click_inner_before_html").style.background = '#fff';
document.getElementById("click_inner_before_default_option").style.display = "none";
document.getElementById("click_inner_before_html_option").style.display = "none";
if(theme_part_name=="part1"){
part1_before_click_inner_mode = "image";
}
if(theme_part_name=="part2"){
part2_before_click_inner_mode = "image";
}
if(window.FileReader){
document.getElementById("click_inner_before_image_option").innerHTML = "<p style='margin:5px'>图片大小不建议超过2M，否则游戏会卡顿甚至闪退</p><input id='click_inner_before_image_file' type='file' style='background:#eee'/>";
input_image = document.getElementById("click_inner_before_image_file");
input_image.addEventListener('change',get_image,false);
image_mode = "before";
}
else{
document.getElementById("click_inner_before_image_option").innerHTML = "<p style='margin:5px'>抱歉，您的浏览器不支持自定义图片</p>";
input.setAttribute('disabled','disabled');
}
}
function click_inner_before_html(){
document.getElementById("click_inner_before_html").style.background = 'rgb(0,200,195)';
document.getElementById("click_inner_before_html").style.color = '#fff';
document.getElementById("click_inner_before_image").style.color = 'rgb(0,200,195)';
document.getElementById("click_inner_before_image").style.background = '#fff';
document.getElementById("click_inner_before_default").style.color = 'rgb(0,200,195)';
document.getElementById("click_inner_before_default").style.background = '#fff';
document.getElementById("click_inner_before_default_option").style.display = "none";
document.getElementById("click_inner_before_image_option").innerHTML = "";
document.getElementById("click_inner_before_html_option").style.display = "inline";
if(theme_part_name=="part1"){
if(part1_before_click_inner_mode=="html"){
document.getElementById("click_inner_before_html_input").value = part1_click_inner;
}
else{
part1_before_click_inner_mode = "html";
document.getElementById("click_inner_before_html_input").value = "";
}
part1_click_inner = document.getElementById("click_inner_before_html_input").value;
part1_reset();
}
if(theme_part_name=="part2"){
if(part2_before_click_inner_mode=="html"){
document.getElementById("click_inner_before_html_input").value = part2_click_inner;
}
else{
part2_before_click_inner_mode = "html";
document.getElementById("click_inner_before_html_input").value = "";
}
part2_click_inner = document.getElementById("click_inner_before_html_input").value;
part2_reset();
}
}
//点击后按键内容设置(默认/自定义图片/HTML)
function click_inner_after_default(){
document.getElementById("click_inner_after_default").style.background = 'rgb(0,200,195)';
document.getElementById("click_inner_after_default").style.color = '#fff';
document.getElementById("click_inner_after_image").style.color = 'rgb(0,200,195)';
document.getElementById("click_inner_after_image").style.background = '#fff';
document.getElementById("click_inner_after_html").style.color = 'rgb(0,200,195)';
document.getElementById("click_inner_after_html").style.background = '#fff';
document.getElementById("click_inner_after_image_option").innerHTML = "";
document.getElementById("click_inner_after_html_option").style.display = "none";
if(theme_part_name=="part1"){
part1_after_click_inner_mode = "default";
part1_after_click_inner = "<img src='click_after_default.png' style='height:100%'/>";
part1_reset();
}
if(theme_part_name=="part2"){
part2_after_click_inner_mode = "default";
part2_after_click_inner = "<img src='click_after_default.png' style='height:100%'/>";
part2_reset();
}
}
function click_inner_after_image(){
document.getElementById("click_inner_after_image").style.background = 'rgb(0,200,195)';
document.getElementById("click_inner_after_image").style.color = '#fff';
document.getElementById("click_inner_after_default").style.color = 'rgb(0,200,195)';
document.getElementById("click_inner_after_default").style.background = '#fff';
document.getElementById("click_inner_after_html").style.color = 'rgb(0,200,195)';
document.getElementById("click_inner_after_html").style.background = '#fff';
document.getElementById("click_inner_after_html_option").style.display = "none";
if(theme_part_name=="part1"){
part1_after_click_inner_mode = "image";
}
if(theme_part_name=="part2"){
part2_after_click_inner_mode = "image";
}
if(window.FileReader){
document.getElementById("click_inner_after_image_option").innerHTML = "<p style='margin:5px'>图片大小不建议超过2M，否则游戏会卡顿甚至闪退</p><input id='click_inner_after_image_file' type='file' style='background:#eee'/>";
input_image = document.getElementById("click_inner_after_image_file");
input_image.addEventListener('change',get_image,false);
image_mode = "after";
}
else{
document.getElementById("click_inner_after_image_option").innerHTML = "<p style='margin:5px'>抱歉，您的浏览器不支持自定义图片</p>";
input.setAttribute('disabled','disabled');
}
}
function click_inner_after_html(){
document.getElementById("click_inner_after_html").style.background = 'rgb(0,200,195)';
document.getElementById("click_inner_after_html").style.color = '#fff';
document.getElementById("click_inner_after_image").style.color = 'rgb(0,200,195)';
document.getElementById("click_inner_after_image").style.background = '#fff';
document.getElementById("click_inner_after_default").style.color = 'rgb(0,200,195)';
document.getElementById("click_inner_after_default").style.background = '#fff';
document.getElementById("click_inner_after_image_option").innerHTML = "";
document.getElementById("click_inner_after_html_option").style.display = "inline";
if(theme_part_name=="part1"){
if(part1_after_click_inner_mode=="html"){
document.getElementById("click_inner_after_html_input").value = part1_after_click_inner;
}
else{
part1_after_click_inner_mode = "html";
document.getElementById("click_inner_after_html_input").value = "";
}
part1_after_click_inner = document.getElementById("click_inner_after_html_input").value;
part1_reset();
}
if(theme_part_name=="part2"){
if(part2_after_click_inner_mode=="html"){
document.getElementById("click_inner_after_html_input").value = part2_after_click_inner;
}
else{
part2_after_click_inner_mode = "html";
document.getElementById("click_inner_after_html_input").value = "";
}
part2_after_click_inner = document.getElementById("click_inner_after_html_input").value;
part2_reset();
}
}
//声音设置
if(sound_mode=="disabled"){disable_sound()}
if(sound_mode=="enabled"){enable_sound()}
function disable_sound(){
document.getElementById("disable_sound").style.background = 'rgb(0,200,195)';
document.getElementById("disable_sound").style.color = '#fff';
document.getElementById("enable_sound").style.color = 'rgb(0,200,195)';
document.getElementById("enable_sound").style.background = '#fff';
document.getElementById("sound_option_button").style.background = '#fff';
document.getElementById("sound_option_button").style.color = 'rgb(0,200,195)';
document.getElementById("sound_option_main").style.display = "none";
sound_mode = "disabled"
}
function enable_sound(){
document.getElementById("enable_sound").style.background = 'rgb(0,200,195)';
document.getElementById("enable_sound").style.color = '#fff';
document.getElementById("disable_sound").style.color = 'rgb(0,200,195)';
document.getElementById("disable_sound").style.background = '#fff';
document.getElementById("sound_option_button").style.background = 'rgb(0,200,195)';
document.getElementById("sound_option_button").style.color = '#fff';
document.getElementById("sound_option_main").style.display = "inline";
sound_mode = "enabled"
}
//时间结束声音设置(无/默认/自定义声音)
if(timeover_sound_mode=="disabled"){timeover_sound_disable()}
if(timeover_sound_mode=="default"){timeover_sound_default()}
if(timeover_sound_mode=="custom"){timeover_sound_custom()}
function timeover_sound_disable(){
document.getElementById("timeover_sound_disable").style.background = 'rgb(0,200,195)';
document.getElementById("timeover_sound_disable").style.color = '#fff';
document.getElementById("timeover_sound_default").style.color = 'rgb(0,200,195)';
document.getElementById("timeover_sound_default").style.background = '#fff';
document.getElementById("timeover_sound_custom").style.color = 'rgb(0,200,195)';
document.getElementById("timeover_sound_custom").style.background = '#fff';
document.getElementById("timeover_sound_custom_option").innerHTML = "";
timeover_sound_mode = "disabled";
}
function timeover_sound_default(){
document.getElementById("timeover_sound_disable").style.color = 'rgb(0,200,195)';
document.getElementById("timeover_sound_disable").style.background = '#fff';
document.getElementById("timeover_sound_default").style.background = 'rgb(0,200,195)';
document.getElementById("timeover_sound_default").style.color = '#fff';
document.getElementById("timeover_sound_custom").style.color = 'rgb(0,200,195)';
document.getElementById("timeover_sound_custom").style.background = '#fff';
document.getElementById("timeover_sound_custom_option").innerHTML = "";
timeover_sound_mode = "default";
timeover_sound = "timeout_end.mp3";
}
function timeover_sound_custom(){
document.getElementById("timeover_sound_disable").style.color = 'rgb(0,200,195)';
document.getElementById("timeover_sound_disable").style.background = '#fff';
document.getElementById("timeover_sound_custom").style.background = 'rgb(0,200,195)';
document.getElementById("timeover_sound_custom").style.color = '#fff';
document.getElementById("timeover_sound_default").style.color = 'rgb(0,200,195)';
document.getElementById("timeover_sound_default").style.background = '#fff';
timeover_sound_mode = "custom";
if(window.FileReader){
document.getElementById("timeover_sound_custom_option").innerHTML = "<p style='margin:5px'>音频大小不建议超过2M，否则游戏会卡顿甚至闪退</p><input id='timeover_sound_file' type='file' style='background:#eee'/>";
input_audio = document.getElementById("timeover_sound_file");
input_audio.addEventListener('change',get_audio,false);
audio_mode = "timeover";
}
else{
document.getElementById("timeover_sound_custom_option").innerHTML = "<p style='margin:5px'>抱歉，您的浏览器不支持自定义声音</p>";
}
}
//点击错误声音设置(无/默认/自定义声音)
if(error_sound_mode=="disabled"){error_sound_disable()}
if(error_sound_mode=="default"){error_sound_default()}
if(error_sound_mode=="custom"){error_sound_custom()}
function error_sound_disable(){
document.getElementById("error_sound_disable").style.background = 'rgb(0,200,195)';
document.getElementById("error_sound_disable").style.color = '#fff';
document.getElementById("error_sound_default").style.color = 'rgb(0,200,195)';
document.getElementById("error_sound_default").style.background = '#fff';
document.getElementById("error_sound_custom").style.color = 'rgb(0,200,195)';
document.getElementById("error_sound_custom").style.background = '#fff';
document.getElementById("error_sound_custom_option").innerHTML = "";
error_sound_mode = "disabled";
}
function error_sound_default(){
document.getElementById("error_sound_disable").style.color = 'rgb(0,200,195)';
document.getElementById("error_sound_disable").style.background = '#fff';
document.getElementById("error_sound_default").style.background = 'rgb(0,200,195)';
document.getElementById("error_sound_default").style.color = '#fff';
document.getElementById("error_sound_custom").style.color = 'rgb(0,200,195)';
document.getElementById("error_sound_custom").style.background = '#fff';
document.getElementById("error_sound_custom_option").innerHTML = "";
error_sound_mode = "default";
error_sound = "click_error.mp3";
}
function error_sound_custom(){
document.getElementById("error_sound_disable").style.color = 'rgb(0,200,195)';
document.getElementById("error_sound_disable").style.background = '#fff';
document.getElementById("error_sound_custom").style.background = 'rgb(0,200,195)';
document.getElementById("error_sound_custom").style.color = '#fff';
document.getElementById("error_sound_default").style.color = 'rgb(0,200,195)';
document.getElementById("error_sound_default").style.background = '#fff';
error_sound_mode = "custom";
if(window.FileReader){
document.getElementById("error_sound_custom_option").innerHTML = "<p style='margin:5px'>音频大小不建议超过2M，否则游戏会卡顿甚至闪退</p><input id='error_sound_file' type='file' style='background:#eee'/>";
input_audio = document.getElementById("error_sound_file");
input_audio.addEventListener('change',get_audio,false);
audio_mode = "error";
}
else{
document.getElementById("error_sound_custom_option").innerHTML = "<p style='margin:5px'>抱歉，您的浏览器不支持自定义声音</p>";
}
}
//有机会时点击错误声音设置(无/默认/自定义声音)
if(error_chance_sound_mode=="disabled"){error_chance_sound_disable()}
if(error_chance_sound_mode=="default"){error_chance_sound_default()}
if(error_chance_sound_mode=="custom"){error_chance_sound_custom()}
function error_chance_sound_disable(){
document.getElementById("error_chance_sound_disable").style.background = 'rgb(0,200,195)';
document.getElementById("error_chance_sound_disable").style.color = '#fff';
document.getElementById("error_chance_sound_default").style.color = 'rgb(0,200,195)';
document.getElementById("error_chance_sound_default").style.background = '#fff';
document.getElementById("error_chance_sound_custom").style.color = 'rgb(0,200,195)';
document.getElementById("error_chance_sound_custom").style.background = '#fff';
document.getElementById("error_chance_sound_custom_option").innerHTML = "";
error_chance_sound_mode = "disabled";
}
function error_chance_sound_default(){
document.getElementById("error_chance_sound_disable").style.color = 'rgb(0,200,195)';
document.getElementById("error_chance_sound_disable").style.background = '#fff';
document.getElementById("error_chance_sound_default").style.background = 'rgb(0,200,195)';
document.getElementById("error_chance_sound_default").style.color = '#fff';
document.getElementById("error_chance_sound_custom").style.color = 'rgb(0,200,195)';
document.getElementById("error_chance_sound_custom").style.background = '#fff';
document.getElementById("error_chance_sound_custom_option").innerHTML = "";
error_chance_sound_mode = "default";
error_chance_sound = "click_error_with_chance.mp3";
}
function error_chance_sound_custom(){
document.getElementById("error_chance_sound_disable").style.color = 'rgb(0,200,195)';
document.getElementById("error_chance_sound_disable").style.background = '#fff';
document.getElementById("error_chance_sound_custom").style.background = 'rgb(0,200,195)';
document.getElementById("error_chance_sound_custom").style.color = '#fff';
document.getElementById("error_chance_sound_default").style.color = 'rgb(0,200,195)';
document.getElementById("error_chance_sound_default").style.background = '#fff';
error_chance_sound_mode = "custom";
if(window.FileReader){
document.getElementById("error_chance_sound_custom_option").innerHTML = "<p style='margin:5px'>音频大小不建议超过2M，否则游戏会卡顿甚至闪退</p><input id='error_chance_sound_file' type='file' style='background:#eee'/>";
input_audio = document.getElementById("error_chance_sound_file");
input_audio.addEventListener('change',get_audio,false);
audio_mode = "error_chance";
}
else{
document.getElementById("error_chance_sound_custom_option").innerHTML = "<p style='margin:5px'>抱歉，您的浏览器不支持自定义声音</p>";
}
}
//按键点击声音设置(无/默认/自定义声音)
function click_sound_disable(){
document.getElementById("click_sound_disable").style.background = 'rgb(0,200,195)';
document.getElementById("click_sound_disable").style.color = '#fff';
document.getElementById("click_sound_default").style.color = 'rgb(0,200,195)';
document.getElementById("click_sound_default").style.background = '#fff';
document.getElementById("click_sound_custom").style.color = 'rgb(0,200,195)';
document.getElementById("click_sound_custom").style.background = '#fff';
document.getElementById("click_sound_default_option").style.display = "none";
document.getElementById("click_sound_custom_option").innerHTML = "";
if(theme_part_name=="part1"){
part1_click_sound_mode = "disabled";
}
if(theme_part_name=="part2"){
part2_click_sound_mode = "disabled";
}
}
function click_sound_default(){
document.getElementById("click_sound_disable").style.color = 'rgb(0,200,195)';
document.getElementById("click_sound_disable").style.background = '#fff';
document.getElementById("click_sound_default").style.background = 'rgb(0,200,195)';
document.getElementById("click_sound_default").style.color = '#fff';
document.getElementById("click_sound_custom").style.color = 'rgb(0,200,195)';
document.getElementById("click_sound_custom").style.background = '#fff';
document.getElementById("click_sound_default_option").style.display = "inline";
document.getElementById("click_sound_custom_option").innerHTML = "";
if(theme_part_name=="part1"){
part1_click_sound_mode = "default";
if(part1_click_sound_default=="1"){
click_sound_default_1();
}
if(part1_click_sound_default=="2"){
click_sound_default_2();
}
}
if(theme_part_name=="part2"){
part2_click_sound_mode = "default";
if(part2_click_sound_default=="1"){
click_sound_default_1();
}
if(part2_click_sound_default=="2"){
click_sound_default_2();
}
}
}
function click_sound_custom(){
document.getElementById("click_sound_disable").style.color = 'rgb(0,200,195)';
document.getElementById("click_sound_disable").style.background = '#fff';
document.getElementById("click_sound_custom").style.background = 'rgb(0,200,195)';
document.getElementById("click_sound_custom").style.color = '#fff';
document.getElementById("click_sound_default").style.color = 'rgb(0,200,195)';
document.getElementById("click_sound_default").style.background = '#fff';
document.getElementById("click_sound_default_option").style.display = "none";
if(window.FileReader){
document.getElementById("click_sound_custom_option").innerHTML = "<p style='margin:5px'>音频大小不建议超过2M，否则游戏会卡顿甚至闪退</p><input id='click_sound_file' type='file' style='background:#eee'/>";
input_audio = document.getElementById("click_sound_file");
input_audio.addEventListener('change',get_audio,false);
if(theme_part_name=="part1"){
part1_click_sound_mode = "custom";
audio_mode = "part1";
}
if(theme_part_name=="part2"){
part2_click_sound_mode = "custom";
audio_mode = "part2";
}
}
else{
document.getElementById("click_sound_custom_option").innerHTML = "<p style='margin:5px'>抱歉，您的浏览器不支持自定义声音</p>";
}
}
function click_sound_default_1(){
document.getElementById("click_sound_default_1").style.background = 'rgb(0,200,195)';
document.getElementById("click_sound_default_1").style.color = '#fff';
document.getElementById("click_sound_default_2").style.color = 'rgb(0,200,195)';
document.getElementById("click_sound_default_2").style.background = '#fff';
if(theme_part_name=="part1"){
part1_click_sound_default = "1";
part1_click_sound = "click_sound_default_1.mp3";
}
if(theme_part_name=="part2"){
part2_click_sound_default = "1";
part2_click_sound = "click_sound_default_1.mp3";
}
}
function click_sound_default_2(){
document.getElementById("click_sound_default_2").style.background = 'rgb(0,200,195)';
document.getElementById("click_sound_default_2").style.color = '#fff';
document.getElementById("click_sound_default_1").style.color = 'rgb(0,200,195)';
document.getElementById("click_sound_default_1").style.background = '#fff';
if(theme_part_name=="part1"){
part1_click_sound_default ="2";
part1_click_sound = "click_sound_default_2.mp3";
}
if(theme_part_name=="part2"){
part2_click_sound_default ="2";
part2_click_sound = "click_sound_default_2.mp3";
}
}
//声音播放
function play_error_sound(){
if(sound_mode=="enabled"){
if(error_sound_mode=="disabled"){}else{
var audio = document.createElement("audio");
audio.src = error_sound;
audio.play();
}
}
}
function play_error_chance_sound(){
if(sound_mode=="enabled"){
if(error_chance_sound_mode=="disabled"){}else{
var audio = document.createElement("audio");
audio.src = error_chance_sound;
audio.play();
}
}
}
function play_timeover_sound(){
if(sound_mode=="enabled"){
if(timeover_sound_mode=="disabled"){}else{
var audio = document.createElement("audio");
audio.src = timeover_sound;
audio.play();
}
}
}
function play_part1_click_sound(){
if(sound_mode=="enabled"){
if(part1_click_sound_mode=="disabled"){}else{
var audio = document.createElement("audio");
audio.src = part1_click_sound;
audio.play();
}
}
}
function play_part2_click_sound(){
if(sound_mode=="enabled"){
if(part2_click_sound_mode=="disabled"){}else{
var audio = document.createElement("audio");
audio.src = part2_click_sound;
audio.play();
}
}
}
//FileReader功能(用于自定义声音和图片)
function get_image(){
var file = input_image.files[0];
if(!/image\/\w+/.test(file.type)){
alert("请确保文件为图像类型");
}
else{
var reader = new FileReader();
reader.readAsDataURL(file);
reader.onload = function(e){
if(theme_part_name=="part1"){
if(image_mode=="before"){
part1_click_inner = "<img src='" + this.result + "' style='height:100%'/>";
part1_reset();
}
if(image_mode=="after"){
part1_after_click_inner = "<img src='" + this.result + "' style='height:100%'/>";
part1_reset();
}
}
if(theme_part_name=="part2"){
if(image_mode=="before"){
part2_click_inner = "<img src='" + this.result + "' style='height:100%'/>";
part2_reset();
}
if(image_mode=="after"){
part2_after_click_inner = "<img src='" + this.result + "' style='height:100%'/>";
part2_reset();
}
}
}
}
}
function get_audio(){
var file = input_audio.files[0];
if(!/audio\/\w+/.test(file.type)){
alert("请确保文件为音频类型");
}
else{
var reader = new FileReader();
reader.readAsDataURL(file);
reader.onload = function(e){
if(audio_mode=="timeover"){
timeover_sound = this.result;
play_timeover_sound();
}
if(audio_mode=="error"){
error_sound = this.result;
play_error_sound();
}
if(audio_mode=="error_chance"){
error_chance_sound = this.result;
play_error_chance_sound();
}
if(audio_mode=="part1"){
part1_click_sound = this.result;
play_part1_click_sound();
}
if(audio_mode=="part2"){
part2_click_sound = this.result;
play_part2_click_sound();
}
}
}
}
//游戏(重新)加载部分
function reset(){
document.getElementById("score").innerHTML = "<span id='count'></span><span id='timeout'></span><span id='chance'></span>";
//设置时间
timeout = user_timeout;
timeout_plus = 0;
if(user_timeout=="disabled"){
document.getElementById("timeout").innerHTML = " 时间: " + timeout_plus;
}
else{
document.getElementById("timeout").innerHTML = " 倒计时: " + timeout;
}
//设置机会
chance_plus = 0;
if(user_chance=="disabled"){
chance = 0;
document.getElementById("chance").innerHTML = "";
}
if(user_chance>=0){
chance = user_chance;
document.getElementById("chance").innerHTML = " 机会: " + chance;
}
if(user_chance=="infinite"){
chance = user_chance;
document.getElementById("chance").innerHTML = " 无限机会";
}
//设置统计点击次数
cnt = 0;
document.getElementById("count").innerHTML = "次数: " + cnt;
//设置界面主题
document.getElementById("line1").style.background = part1_border;
document.getElementById("line2").style.background = part2_border;
document.getElementById("title").innerHTML = document.getElementById("user_title_input").value;
//载入游戏
part1_fullheight = 348;
part2_fullheight = 348;
document.getElementById("masker").style.bottom = "70px";
document.getElementById("switch_animation").innerHTML = "#line2{bottom:348px;}#line1{bottom:0px;}";
document.getElementById("end_animation").innerHTML = "";
part1_reset();
part2_reset();
}
//重新设置一区
function part1_reset(){
part_name = "1";
line_name = "1";
if(set_mode=="stair"){if(stair_mode=="r2l"){list_name = "1";}if(stair_mode=="l2r"){list_name = "5";}}
part_wipe();
part_set();
}
//重新设置二区
function part2_reset(){
part_name = "2";
line_name = "1";
if(set_mode=="stair"){if(stair_mode=="r2l"){list_name = "1";}if(stair_mode=="l2r"){list_name = "5";}}
part_wipe();
part_set();
}
//清除原先的按键排列
function part_wipe(){
var part = document.getElementsByClassName("part" + part_name);
for (var i=0;i<part.length;i++){
part[i].onclick = function onclick(event) { get_this = this;errorclick() };
if(part_name==1){part[i].style.background = part1_background;}
else if(part_name==2){part[i].style.background = part2_background;}
part[i].innerHTML = "";
}
}
//设置新的按键排列
function part_set(){
if(part_name==1){
var part_click = function onclick(event) { this.innerHTML = "<div style='width:calc(20% - 2px);overflow:hidden;height:68px;text-align:center;position:absolute;margin:-34px -1px'>" + part1_after_click_inner + "</div>";part1_click() };
var part_click_inner = "<div class='clickinner' style='width:calc(20% - 2px);overflow:hidden;height:68px;text-align:center;position:absolute;margin:-34px -1px'>" + part1_click_inner + "</div>";
var part_click_background = part1_click_background;
}
if(part_name==2){
var part_click = function onclick(event) { this.innerHTML = "<div style='width:calc(20% - 2px);overflow:hidden;height:68px;text-align:center;position:absolute;margin:-34px -1px'>" + part2_after_click_inner + "</div>";part2_click() };
var part_click_inner = "<div class='clickinner' style='width:calc(20% - 2px);overflow:hidden;height:68px;text-align:center;position:absolute;margin:-34px -1px'>" + part2_click_inner + "</div>";
var part_click_background = part2_click_background;
}
if(line_name<=5){
//随机模式
if(set_mode=="random"){
var part_random = Math.random()*5;
if(part_random>=4){list_name = 5;}
else if(part_random>=3){list_name = 4;}
else if(part_random>=2){list_name = 3;}
else if(part_random>=1){list_name = 2;}
else{list_name = 1;}
}
if(list_name<=5){
document.getElementById("part" + part_name + "_" + line_name + "_" + list_name).onclick = part_click;
document.getElementById("part" + part_name + "_" + line_name + "_" + list_name).innerHTML = part_click_inner;
document.getElementById("part" + part_name + "_" + line_name + "_" + list_name).style.background = part_click_background;
}
//楼梯模式
if(set_mode=="stair"){
if(stair_mode=="r2l"){
list_name++;
}
if(stair_mode=="l2r"){
list_name = list_name - 1;
}
}
line_name++;
part_set();
}
}
//游戏操作部分
//一区按键点击后
function part1_click(){
click();
if(焯=="enabled"){开焯();}
else{play_part1_click_sound()}
document.getElementById("main").style.background = part1_background;
var random1 = "falla" + animation_cnt;
var random2 = "fallb" + animation_cnt;
document.getElementById("switch_animation").innerHTML = "#line1{bottom:calc(" + part1_fullheight + "px - 418px);animation-name:" + random1 +";animation-duration:0.1s;}@keyframes " + random1 +"{0%{bottom:calc(" + part1_fullheight + "px - 348px)}100%{bottom:calc(" + part1_fullheight + "px - 418px)}}#line2{bottom:calc(" + part1_fullheight + "px - 70px);animation-name:" + random2 +";animation-duration:0.1s;}@keyframes " + random2 +"{0%{bottom:" + part1_fullheight + "px}100%{bottom:calc(" + part1_fullheight + "px - 70px)}}";
part1_fullheight = part1_fullheight - 70;
if(part1_fullheight<=0){
setTimeout("part1_turn();",100);
}
}
//将一区移至顶部并重新设置
function part1_turn(){
part1_fullheight = 348;
document.getElementById("switch_animation").innerHTML = "#line1{bottom:348px;}#line2{bottom:0px;}";
part1_reset();
}
//二区按键点击后
function part2_click(){
click();
if(焯=="enabled"){开焯();}
else{play_part2_click_sound()}
document.getElementById("main").style.background = part2_background;
var random1 = "falla" + animation_cnt;
var random2 = "fallb" + animation_cnt;
document.getElementById("switch_animation").innerHTML = "#line1{bottom:calc(" + part2_fullheight + "px - 70px);animation-name:" + random2 +";animation-duration:0.1s;}@keyframes " + random1 +"{0%{bottom:calc(" + part2_fullheight + "px - 348px)}100%{bottom:calc(" + part2_fullheight + "px - 418px)}}#line2{bottom:calc(" + part2_fullheight + "px - 418px);animation-name:" + random1 +";animation-duration:0.1s;}@keyframes " + random2 +"{0%{bottom:" + part2_fullheight + "px}100%{bottom:calc(" + part2_fullheight + "px - 70px)}}";
part2_fullheight = part2_fullheight - 70;
if(part2_fullheight<=0){
setTimeout("part2_turn();",100);
}
}
//将二区移至顶部并重新设置
function part2_turn(){
part2_fullheight = 348;
document.getElementById("switch_animation").innerHTML = "#line2{bottom:348px;}#line1{bottom:0px;}";
part2_reset();
}
var click_mode_cnt = "a";
//按键点击后反应
function click(){
cnt++;
if(cnt==1){
setTimeout ("starttimeout()",1000);
}
document.getElementById("count").innerHTML = "次数: " + cnt;
animation_cnt++;
}
//点击错误
function errorclick(){
if(chance<=0){
document.getElementById("masker").style.bottom = "0px";
if(焯=="enabled"){
if(sound_mode=="enabled"){
if(error_sound_mode=="disabled"){}else{
var audio = document.createElement("audio");
audio.src = "boom.mp3";
audio.play();
}
}
}
else{play_error_sound()}
document.getElementById("score").innerHTML = "点错啦!";
get_this.style.background = '#ff0000';
setTimeout("if(get_this.className=='part1'){get_this.style.background = part1_background}if(get_this.className=='part2'){get_this.style.background = part2_background}",100);
setTimeout("get_this.style.background = '#ff0000'",200);
setTimeout("if(get_this.className=='part1'){get_this.style.background = part1_background}if(get_this.className=='part2'){get_this.style.background = part2_background}",300);
setTimeout("get_this.style.background = '#ff0000'",400);
setTimeout("if(get_this.className=='part1'){get_this.style.background = part1_background}if(get_this.className=='part2'){get_this.style.background = part2_background}",500);
setTimeout("get_this.style.background = '#ff0000'",600);
setTimeout("end()",1000);
}
else{
play_error_chance_sound();
get_this.style.background = '#ffaaaa';
setTimeout("if(get_this.className=='part1'){get_this.style.background = part1_background}if(get_this.className=='part2'){get_this.style.background = part2_background}",150);
setTimeout("get_this.style.background = '#ffaaaa'",300);
setTimeout("if(get_this.className=='part1'){get_this.style.background = part1_background}if(get_this.className=='part2'){get_this.style.background = part2_background}",450);
setTimeout("get_this.style.background = '#ffaaaa'",600);
if(user_chance=="infinite"){
document.getElementById("chance").innerHTML = " 无限机会";
}
else{
chance = chance - 1;
document.getElementById("chance").innerHTML = " 机会: " + chance;
if(chance<=0){
document.getElementById("chance").innerHTML = " 机会用完";
}
}
chance_plus++;
}
}
//游戏计时部分
function starttimeout(){
timeout_plus++;
//倒计时禁用情况下
if(user_timeout=="disabled"){
document.getElementById("timeout").innerHTML = " 时间: " + timeout_plus;
setTimeout ("starttimeout()",1000);
}
//倒计时启用情况下
else{
timeout = timeout - 1;
if(timeout==0){
document.getElementById("masker").style.bottom = "0px";
play_timeover_sound();
document.getElementById("score").innerHTML = "时间到!";
document.getElementById("end_animation").innerHTML = "#main{animation-name:oa;animation-duration:1s;}@keyframes oa{0%{opacity:1;}12%{opacity:0;}25%{opacity:1;}32%{opacity:0;}50%{opacity:1;}62%{opacity:0;}75%{opacity:1;}100%{opacity:1;}}";
setTimeout("end()",1000);
}
else if(timeout>=1){
document.getElementById("timeout").innerHTML = " 倒计时: " + timeout;
setTimeout ("starttimeout()",1000);
}
}
}
//游戏结束部分
//弹出窗口显示成绩
var chance_score;
function end(){
document.getElementById("alert_style").innerHTML = "#endui{animation-name:endui_in;animation-duration:0.3s;}@keyframes endui_in{0%{top:-350px}100%{top:-20px}}#startui{display:none}";
alertbg_in();
if(timeout_plus>=1){
if(chance_plus>=1){
chance_score = "<p>使用了" + chance_plus + "次机会</p>";
}
else{
chance_score = "<p>没有使用机会</p>";
}
//得分评语，变量cnt为点击次数，timeout_plus是游戏所使用的时间，cnt/timeout_plus可以得出平均每秒点击次数(CPS)
if(cnt/timeout_plus>=10){endui_say = "焯！";}
else if(cnt/timeout_plus>=7){endui_say = "哥谭再次陷入尴尬";}
else if(cnt/timeout_plus>=5){endui_say = "好家伙";}
else if(cnt/timeout_plus>=3){endui_say = "就这？！";}
else{endui_say = "你被焯掉了。。。";}
document.getElementById("endui_timeout").innerHTML = "<p style='margin:5px;font-size:15px;color:rgb(0,200,195)'>" + endui_say + "</p><p>您在 " + timeout_plus + " 秒内点击了 " + cnt + " 次</p><p>平均每秒点击次数(CPS)：" + cnt / timeout_plus + "</p>" + chance_score;
}
else{
document.getElementById("endui_timeout").innerHTML = "<p>您的操作时间不足 1 秒，不能获取成绩</p>";
}
}
//重新开始
function restart(){
document.getElementById("alert_style").innerHTML = "#endui{animation-name:endui_out;animation-duration:0.3s;}@keyframes endui_out{0%{top:-20px}100%{top:-350px}}#startui{display:none}";
setTimeout("document.getElementById('alert_style').innerHTML = '#endui{display:none}#startui{display:none}'",300);
alertbg_out();
reset();
}
//返回到起始页
function tostartui(){
document.getElementById("alert_style").innerHTML = "#endui{animation-name:endui_out;animation-duration:0.3s;}@keyframes endui_out{0%{top:-20px}100%{top:-350px}}#startui{display:none}";
setTimeout("loadstartui()",300);
reset();
}
//焯
if(焯=="enabled"){open_焯()}
if(焯=="disabled"){close_焯()}
function open_焯(){
document.getElementById("open_焯").style.background = 'rgb(0,200,195)';
document.getElementById("open_焯").style.color = '#fff';
document.getElementById("close_焯").style.color = 'rgb(0,200,195)';
document.getElementById("close_焯").style.background = '#fff';
焯 = "enabled";
}
function close_焯(){
document.getElementById("close_焯").style.background = 'rgb(0,200,195)';
document.getElementById("close_焯").style.color = '#fff';
document.getElementById("open_焯").style.color = 'rgb(0,200,195)';
document.getElementById("open_焯").style.background = '#fff';
焯 = "disabled";
}
function chaoa(){
var part = document.getElementsByClassName("clickinner");
for (var i=0;i<part.length;i++){part[i].innerHTML = "<img src='click_before_image_chao.jpg' style='height:100%'/>";}
var part = document.getElementsByClassName("part1");
for (var i=0;i<part.length;i++){part[i].style.background = "#ff0000";}
var part = document.getElementsByClassName("part2");
for (var i=0;i<part.length;i++){part[i].style.background = "#ff0000";}
document.getElementById("main").style.background = "#ff0000";
document.getElementById("line1").style.background = "#111";
document.getElementById("line2").style.background = "#111";
}
function chaob(){
var part = document.getElementsByClassName("clickinner");
for (var i=0;i<part.length;i++){part[i].innerHTML = "<img src='click_before_image_chao.jpg' style='height:100%;transform:rotateY(180deg)'/>";}
var part = document.getElementsByClassName("part1");
for (var i=0;i<part.length;i++){part[i].style.background = "#fff";}
var part = document.getElementsByClassName("part2");
for (var i=0;i<part.length;i++){part[i].style.background = "#fff";}
document.getElementById("main").style.background = "#fff";
document.getElementById("line1").style.background = "#eee";
document.getElementById("line2").style.background = "#eee";
}
function 开焯(){
if(sound_mode=="enabled"){
if(cnt>=28){
var audio = document.createElement("audio");
audio.src = "click_sound_chao.m4a";
audio.play();
if(click_mode_cnt=="a"){
setTimeout("chaoa()",105);
click_mode_cnt = "b";
}
else if(click_mode_cnt=="b"){
setTimeout("chaob()",105);
click_mode_cnt = "a";
}
}
else if(cnt>=21){
var audio = document.createElement("audio");
audio.src = "click_sound_" + cnt + ".m4a";
audio.play();
}
else{
var audio = document.createElement("audio");
audio.src = "click_sound_" + cnt + ".mp3";
audio.play();
}
}
else{
if(click_mode_cnt=="a"){
setTimeout("chaoa()",105);
click_mode_cnt = "b";
}
else if(click_mode_cnt=="b"){
setTimeout("chaob()",105);
click_mode_cnt = "a";
}
}
}
</script>
</body>
</html>